<project name="de.itemis.mps.build.example.rcp.win" default="build">
  <!-- Generated by MPS -->
  <property name="build.dir" location="build" />
  <property name="build.tmp" location="${build.dir}/tmp/de.itemis.mps.build.example.rcp.win" />
  <property name="build.layout" location="${build.dir}/artifacts/de.itemis.mps.build.example.rcp.win" />
  <property name="platfromBuild" value="EXAMPLE-172" />
  <property name="applicationBuild" value="1127" />
  <property name="buildDate" value="20170822" />
  <property name="artifacts.root" location="${basedir}/../../artifacts" />
  <property name="project.home" location="${basedir}/../.." />
  <property name="platform.artifacts" location="${artifacts.root}/com.mbeddr.platform" />
  <property name="iets3.opensource.artifacts" location="${artifacts.root}/org.iets3.opensource" />
  <property name="artifacts.jdk" location="${artifacts.root}/jdk" />
  <property name="mps.home" location="" />
  <property name="artifacts.mps" location="${mps.home}" />
  <property name="artifacts.de.itemis.mps.build.example" location="${build.dir}/artifacts/de.itemis.mps.build.example" />
  <property name="artifacts.com.mbeddr.platform" location="${platform.artifacts}" />
  <property name="artifacts.org.iets3.opensource" location="${iets3.opensource.artifacts}" />
  <property name="artifacts.jdk" location="${artifacts.jdk}" />
  <property file="${artifacts.mps}/build.properties" prefix="import.mps" />
  <property file="${artifacts.de.itemis.mps.build.example}/build.properties" prefix="import.de.itemis.mps.build.example" />
  <property name="mps.build.number" value="${import.mps.mps.build.number}" />
  <property name="mps.date" value="${import.mps.mps.date}" />
  <property name="mps.build.vcs.number" value="${import.mps.mps.build.vcs.number}" />
  <property name="mps.teamcity.buildConfName" value="${import.mps.mps.teamcity.buildConfName}" />
  <property name="mps.idea.platform.build.number" value="${import.mps.mps.idea.platform.build.number}" />
  <property name="mps.mps.build.counter" value="${import.mps.mps.mps.build.counter}" />
  <property name="mpsBootstrapCore.version" value="${import.mps.mpsBootstrapCore.version}" />
  <property name="com.mbeddr.platform.major.version" value="${import.de.itemis.mps.build.example.com.mbeddr.platform.major.version}" />
  <property name="com.mbeddr.platform.minor.version" value="${import.de.itemis.mps.build.example.com.mbeddr.platform.minor.version}" />
  <property name="com.mbeddr.platform.build" value="${import.de.itemis.mps.build.example.com.mbeddr.platform.build}" />
  <property name="com.mbeddr.platform.mbeddr.version" value="${import.de.itemis.mps.build.example.com.mbeddr.platform.mbeddr.version}" />
  <property name="de.itemis.mps.extensions.versionNumber" value="${import.de.itemis.mps.build.example.de.itemis.mps.extensions.versionNumber}" />
  <property name="org.iets3.opensource.minor" value="${import.de.itemis.mps.build.example.org.iets3.opensource.minor}" />
  <property name="org.iets3.opensource.major" value="${import.de.itemis.mps.build.example.org.iets3.opensource.major}" />
  <property name="org.iets3.opensource.build" value="${import.de.itemis.mps.build.example.org.iets3.opensource.build}" />
  <property name="org.iets3.opensource.version" value="${import.de.itemis.mps.build.example.org.iets3.opensource.version}" />
  
  <target name="assemble" depends="classes, declare-mps-tasks, fetchDependencies">
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win">
      <fileset dir="${build.tmp}/deps/jdk-windows_x64.tgz">
        <exclude name="bin/**" />
        <exclude name="bin" />
        <exclude name="include/**" />
        <exclude name="lib/**" />
        <exclude name="ASSEMBLY_EXCEPTION" />
        <exclude name="LICENSE" />
        <exclude name="release" />
        <exclude name="THIRD_PARTY_README" />
      </fileset>
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/jre/lib" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/jre/lib">
      <fileset dir="${build.tmp}/deps/jdk-windows_x64.tgz/lib" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/bin" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/bin">
      <fileset dir="${mps.home}/bin/win" />
    </copy>
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/bin">
      <fileset file="${mps.home}/bin/idea.properties" />
    </copy>
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/bin">
      <fileset file="${mps.home}/bin/log.xml" />
    </copy>
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/bin">
      <fileset file="${mps.home}/bin/log4j.dtd" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/languages" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/languages">
      <fileset dir="${mps.home}/languages" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/lib" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/lib">
      <fileset dir="${mps.home}/lib" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins">
      <fileset dir="${artifacts.de.itemis.mps.build.example}" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.core.os" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.core.os">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.core.os" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.comp.os" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.comp.os">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.comp.os" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.req.os" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.req.os">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.req.os" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.build.os" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.build.os">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.build.os" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.core.assessment" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.core.assessment">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.core.assessment" />
    </copy>
    <mkdir dir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.trace" />
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins/org.iets3.trace">
      <fileset dir="${artifacts.org.iets3.opensource}/org.iets3.trace" />
    </copy>
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins">
      <fileset dir="${artifacts.com.mbeddr.platform}" />
    </copy>
    <copy todir="${build.layout}/de.itemis.mps.build.example-RCP-win/plugins">
      <fileset dir="${mps.home}/plugins">
        <exclude name="mps-execution-configurations/**" />
        <exclude name="mps-trove/**" />
        <exclude name="samples.jar" />
        <exclude name="cvsIntegration/**" />
        <exclude name="jetpad/**" />
        <exclude name="diagramEditor/**" />
        <exclude name="ideaIntegration.jar" />
        <exclude name="context-tool/**" />
      </fileset>
    </copy>
    <echo file="${build.layout}/de.itemis.mps.build.example-RCP-win/build.number">build.number=${applicationBuild}${line.separator}date=${buildDate}${line.separator}revision.number=${mps.build.vcs.number}${line.separator}configuration.name=${mps.teamcity.buildConfName}${line.separator}version=${mpsBootstrapCore.version}${line.separator}idea.platform.build.number=${mps.idea.platform.build.number}</echo>
    <echo file="${build.layout}/build.properties">de.itemis.mps.build.example.rcp.win.platfromBuild=${platfromBuild}${line.separator}de.itemis.mps.build.example.rcp.win.applicationBuild=${applicationBuild}${line.separator}de.itemis.mps.build.example.rcp.win.buildDate=${buildDate}${line.separator}mps.build.number=${mps.build.number}${line.separator}mps.date=${mps.date}${line.separator}mps.build.vcs.number=${mps.build.vcs.number}${line.separator}mps.teamcity.buildConfName=${mps.teamcity.buildConfName}${line.separator}mps.idea.platform.build.number=${mps.idea.platform.build.number}${line.separator}mps.mps.build.counter=${mps.mps.build.counter}${line.separator}mpsBootstrapCore.version=${mpsBootstrapCore.version}${line.separator}com.mbeddr.platform.major.version=${com.mbeddr.platform.major.version}${line.separator}com.mbeddr.platform.minor.version=${com.mbeddr.platform.minor.version}${line.separator}com.mbeddr.platform.build=${com.mbeddr.platform.build}${line.separator}com.mbeddr.platform.mbeddr.version=${com.mbeddr.platform.mbeddr.version}${line.separator}de.itemis.mps.extensions.versionNumber=${de.itemis.mps.extensions.versionNumber}${line.separator}org.iets3.opensource.minor=${org.iets3.opensource.minor}${line.separator}org.iets3.opensource.major=${org.iets3.opensource.major}${line.separator}org.iets3.opensource.build=${org.iets3.opensource.build}${line.separator}org.iets3.opensource.version=${org.iets3.opensource.version}</echo>
  </target>
  
  <target name="buildDependents">
    <ant antfile="build.xml" inheritAll="false" useNativeBasedir="true" />
  </target>
  
  <target name="fetchDependencies">
    <mkdir dir="${build.tmp}/deps/jdk-windows_x64.tgz" />
    <untar src="${artifacts.jdk}/jdk-windows_x64.tgz" dest="${build.tmp}/deps/jdk-windows_x64.tgz" compression="gzip" />
  </target>
  
  <target name="build" depends="assemble" />
  
  <target name="clean">
    <delete dir="${build.tmp}" />
    <delete dir="${build.layout}" />
  </target>
  
  <target name="compileJava" />
  
  <target name="processResources" />
  
  <target name="classes" depends="compileJava, processResources" />
  
  <target name="test" depends="classes" />
  
  <target name="check" depends="test" />
  
  <target name="generate" depends="declare-mps-tasks" />
  
  <target name="declare-mps-tasks" />
  
  <target name="makeDependents" />
</project>